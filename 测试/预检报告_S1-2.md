# 预检报告（S1-2）

时间：${DATE}

范围：本地文档级模拟（不实际执行npm/pytest），验证报告产物与门禁脚本接入路径。

检查项：
- Node/npm：未强制要求，本地可选安装
- Vitest：由CI安装（package.json 已配置）
- Hooks：`scripts/setup.ps1` 可一键绑定，`hooks/*.ps1` 存在
- 策略：`policy/*.json|yaml` 存在；`routes/domains/quality-gates` 已配置
- 报告：`reports/*` 目录存在示例产物（由脚本生成）

结论：
- 当前可在无运行环境下完成文档级导引；具备最小可验证骨架
- 下一步：安装Node后执行 `npm test` 与 `pwsh scripts/run_reports.ps1`

证据：
- `reports/preflight_placeholder.txt`
- `reports/policy-report.md`
- `reports/ci-dashboard.md`

# S1-2 预检报告（示例）

时间：2025-10-06 20:18
窗口：A
范围：write_code 检查（禁硬编码/先解释/查重）

样例输入（摘要）：
- purpose: "数据导出功能"
- file_path: "src/utils/export.ts"
- explanation: "采用配置化输出路径，比较过硬编码与环境变量，最终选择读取config..."
- code: 包含硬编码路径 C:\\data 与 http://127.0.0.1:9000

检测结果：
- IR-003：命中2处硬编码（C:\\data、http://127.0.0.1:9000）→ critical
- IR-010：search_codebase 返回相似模块 src/utils/export.ts (85%) → critical
- IR-005：说明长度充分 → 通过

建议：
- 路径改为从 config 读取；服务端点从配置注入
- 复用现有 export 模块或在说明中给出合理新建理由

结论：未通过；需按建议修复后重试

{
  "ruleId": "IR-040",
  "title": "数据文件格式规范 - 强化说明",
  "lastUpdate": "2025-10-08",
  "priority": "CRITICAL",
  "violationRate": "极高（历史最高违规率）",
  
  "核心原则": {
    "简单判断": "这个文件是给程序读还是给人读？",
    "程序读": "必须用 .json（系统内部数据）",
    "人读": "可以用 .md（文档、报告、说明）"
  },
  
  "完全禁止MD的场景": {
    "说明": "以下场景必须用JSON，禁止使用MD",
    "场景列表": [
      {
        "场景": "系统内部数据",
        "示例": [
          "❌ 测试结果.md → ✅ test-result.json",
          "❌ 执行数据.md → ✅ execution-data.json",
          "❌ 配置数据.md → ✅ config.json",
          "❌ 统计数据.md → ✅ statistics.json",
          "❌ 日志记录.md → ✅ logs.json",
          "❌ 用户列表.md → ✅ users.json",
          "❌ 任务列表.md → ✅ tasks.json"
        ],
        "原因": "系统数据需要程序解析、查询、处理，MD格式不适合"
      },
      {
        "场景": "监控和统计",
        "示例": [
          "❌ 性能指标.md → ✅ metrics.json",
          "❌ 执行率.md → ✅ execution-rate.json",
          "❌ 监测日志.md → ✅ monitor-log.json"
        ],
        "原因": "监控数据需要实时分析和查询"
      },
      {
        "场景": "结构化数据",
        "示例": [
          "❌ API响应.md → ✅ api-response.json",
          "❌ 数据库记录.md → ✅ db-records.json",
          "❌ 索引数据.md → ✅ index-data.json"
        ],
        "原因": "结构化数据必须保持数据完整性"
      }
    ]
  },
  
  "完全允许MD的场景": {
    "说明": "以下场景必须用MD，这是给人看的文档",
    "场景列表": [
      {
        "场景": "报告文档",
        "示例": [
          "✅ 测试报告.md",
          "✅ 诊断报告.md",
          "✅ 分析报告.md",
          "✅ 完成报告.md",
          "✅ 评估报告.md"
        ],
        "原因": "报告是给人阅读的，需要格式化展示"
      },
      {
        "场景": "计划文档",
        "示例": [
          "✅ 开发计划.md",
          "✅ 实施计划.md",
          "✅ 升级计划.md",
          "✅ 测试计划.md"
        ],
        "原因": "计划文档需要层次结构和人类可读性"
      },
      {
        "场景": "说明文档",
        "示例": [
          "✅ README.md",
          "✅ CHANGELOG.md",
          "✅ 使用说明.md",
          "✅ 安装指南.md",
          "✅ API文档.md",
          "✅ 部署文档.md"
        ],
        "原因": "说明文档是标准格式，供人阅读"
      },
      {
        "场景": "技术文档",
        "示例": [
          "✅ 架构说明.md",
          "✅ 设计文档.md",
          "✅ 技术规范.md",
          "✅ 最佳实践.md"
        ],
        "原因": "技术文档需要代码高亮和格式化"
      },
      {
        "场景": "会议记录",
        "示例": [
          "✅ 会议记录.md",
          "✅ 讨论记录.md",
          "✅ 决策记录.md"
        ],
        "原因": "会议记录是人类协作文档"
      }
    ]
  },
  
  "判断标准": {
    "关键问题": "这个文件是给程序读还是给人读？",
    "判断流程": [
      {
        "步骤": 1,
        "问题": "文件是否需要被程序解析和查询？",
        "是": "必须用 .json",
        "否": "继续下一步"
      },
      {
        "步骤": 2,
        "问题": "文件是否包含结构化数据（如列表、对象、数组）？",
        "是": "必须用 .json",
        "否": "继续下一步"
      },
      {
        "步骤": 3,
        "问题": "文件名是否包含这些关键词？",
        "关键词": ["结果", "数据", "data", "result", "config", "log", "统计", "记录", "列表"],
        "包含": "必须用 .json",
        "不包含": "继续下一步"
      },
      {
        "步骤": 4,
        "问题": "文件名是否包含这些关键词？",
        "关键词": ["报告", "报表", "report", "计划", "plan", "说明", "指南", "guide", "文档", "doc"],
        "包含": "可以用 .md",
        "不包含": "默认用 .json（更安全）"
      }
    ]
  },
  
  "AI执行要求": {
    "创建文件前": [
      "1. 必须先判断：这个文件是给程序读还是给人读？",
      "2. 检查文件名中的关键词",
      "3. 确认文件用途和内容类型",
      "4. 选择正确的文件格式",
      "5. 如果不确定，默认用 .json（更安全）"
    ],
    "禁止行为": [
      "❌ 禁止不经判断就创建 .md 数据文件",
      "❌ 禁止将结构化数据保存为 .md",
      "❌ 禁止将系统日志保存为 .md",
      "❌ 禁止将监控数据保存为 .md",
      "❌ 禁止将测试结果保存为 .md"
    ],
    "强制检查": [
      "创建任何文件前，必须读取此规则",
      "如果违规，立即停止并修正",
      "如果不确定，询问用户或默认用 .json"
    ]
  },
  
  "常见违规案例": {
    "案例1": {
      "错误": "创建了 '云端部署完成报告.json'",
      "原因": "报告是给人看的，应该用 .md",
      "正确": "云端部署完成报告.md",
      "判断": "文件名包含'报告' → 用 .md"
    },
    "案例2": {
      "错误": "创建了 'test-results.md'",
      "原因": "测试结果是系统数据，应该用 .json",
      "正确": "test-results.json",
      "判断": "文件名包含'results' → 用 .json"
    },
    "案例3": {
      "错误": "创建了 '监测数据汇总.md'",
      "原因": "监测数据需要程序分析，应该用 .json",
      "正确": "monitor-summary.json",
      "判断": "文件名包含'数据' → 用 .json"
    }
  },
  
  "历史问题": {
    "违规率": "极高 - IR-040是历史违规率最高的规则",
    "原因分析": [
      "AI习惯性使用MD格式",
      "未充分理解'数据'vs'文档'的区别",
      "创建文件前未进行格式判断"
    ],
    "改进措施": [
      "强化判断流程",
      "明确场景列表",
      "提供清晰的判断标准",
      "要求创建文件前必读此规则"
    ]
  },
  
  "快速参考": {
    "文件类型": {
      "报告": "✅ .md（报告、report）",
      "计划": "✅ .md（计划、plan）",
      "说明": "✅ .md（说明、指南、guide、README）",
      "数据": "❌ .md → ✅ .json（data、结果、result）",
      "配置": "❌ .md → ✅ .json（config、设置）",
      "日志": "❌ .md → ✅ .json（log、记录、日志）",
      "统计": "❌ .md → ✅ .json（stats、统计、指标）"
    }
  },
  
  "执行检查清单": {
    "创建文件前": [
      "□ 已读取IR-040规则",
      "□ 已判断文件用途（程序读/人读）",
      "□ 已检查文件名关键词",
      "□ 已选择正确格式",
      "□ 如不确定，已默认选择 .json"
    ]
  },
  
  "紧急提醒": {
    "message": "IR-040是违规率最高的规则！",
    "action": "创建任何文件前，必须先判断格式！",
    "rule": "程序读用JSON，人读用MD，不确定用JSON！"
  }
}


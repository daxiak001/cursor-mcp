# 小柳系统历史要求全集整理

**整理时间：** 2025-10-08  
**整理来源：** 【材料归档】文件夹  
**整理目的：** 汇总所有历史提出的要求，分析有用内容加入当前系统

---

## 📊 要求来源统计

正在扫描以下关键文档：
1. ✅ 【规则整理】小柳系统完整规则清单与分类目录.md (299+条规则)
2. ⏳ 正在扫描其他文档...

---

## 📋 第一部分：超级铁律 (SUPREME PRIORITY)

### SIL-001: 用户问题必须立即解决并自动升级
- **核心要求：** 用户提出问题→立即分析→立即实施→立即升级，全程0秒延迟
- **AI可执行性：** ⚠️ 部分可执行 (需人工上传)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ⚠️ 理想化，实际难以实现"0秒延迟"和"自动升级"

### SIL-002: 服务器连接配置必须永久记住
- **核心要求：** SSH端口22，API端口8889，8888已废弃，不能混淆
- **AI可执行性：** ✅ 可记忆 (但易遗忘)
- **当前系统状态：** ❌ 未实现配置记忆机制
- **是否有用：** ✅ 有用 - 可通过配置文件实现

### SIL-003: 禁止等待用户确认，直接执行
- **核心要求：** 接收指令后立即执行，不询问"是否开始""是否继续"
- **AI可执行性：** ✅ 可执行 (提示词有效)
- **当前系统状态：** ✅ 已实现 (dialogue-l1.yaml中已有)
- **是否有用：** ✅ 已采用

### SIL-004: SSH命令超时保护机制
- **核心要求：** 所有SSH命令必须设置超时时间(默认10秒)，超时自动退出
- **AI可执行性：** ❌ 无法执行 (AI无法设置超时)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ⚠️ 理想但AI无法直接控制

---

## 📋 第二部分：开发铁律 - Critical级别 (19条)

### 2.1 开发流程类

#### IR-001: 开发全权负责，不中途询问
- **核心要求：** 从0到1完成，不中途询问用户
- **AI可执行性：** ✅ 部分有效 (提示词可减少询问)
- **当前系统状态：** ✅ 已实现 (SIL-003相关)
- **是否有用：** ✅ 已采用

#### IR-009: 必须完整测试确保无BUG后交付
- **核心要求：** 功能测试+边界测试+异常测试
- **AI可执行性：** ⚠️ 部分可行 (AI可测试，但常跳过)
- **当前系统状态：** ❌ 未强制执行
- **是否有用：** ✅ 有用 - 可加入质量门禁

#### IR-010: 开发前必须检查模块是否已存在
- **核心要求：** 使用grep/codebase_search搜索
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (core-l1.yaml中已有)
- **是否有用：** ✅ 已采用

#### IR-015: 必须自动识别并保存永久铁律
- **核心要求：** 对话中出现新规则→自动保存
- **AI可执行性：** ❌ 无法自动
- **当前系统状态：** ❌ 未实现
- **是否有用：** ⚠️ 理想但技术限制

#### IR-016: 必须设置测试超时保护机制
- **核心要求：** 超时30-300秒，最大次数限制
- **AI可执行性：** ⚠️ 可建议 (AI可写代码设置)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可作为代码规范建议

#### IR-024: 对话刷新触发机制
- **核心要求：** 超过15轮/15000字符/30分钟→刷新
- **AI可执行性：** ❌ 无法执行 (AI无法感知对话长度)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ⚠️ 理想但AI无法感知

#### IR-028: 前置检查清单强制执行
- **核心要求：** 关键操作前强制执行检查清单
- **AI可执行性：** ⚠️ 依赖自觉
- **当前系统状态：** ❌ 未强制执行
- **是否有用：** ✅ 有用 - 可通过提示词强化

#### IR-029: 主动记忆管理系统
- **核心要求：** 每5轮生成摘要，P0永不丢失
- **AI可执行性：** ❌ 无法执行
- **当前系统状态：** ❌ 未实现
- **是否有用：** ⚠️ 理想但技术限制

### 2.2 代码质量类

#### IR-003: 必须使用配置变量和参数传递
- **核心要求：** 禁止硬编码，使用配置文件
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (core-l1.yaml中已有)
- **是否有用：** ✅ 已采用

#### IR-005: 错误修复前先解释原因
- **核心要求：** 先分析→解释→再修复
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (core-l1.yaml中已有)
- **是否有用：** ✅ 已采用

#### IR-020: 必须执行三重验证测试标准
- **核心要求：** 日志+截图+实际执行
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入测试规范

#### IR-021: 项目完成必须5轮完整测试
- **核心要求：** 连续5轮0到1测试
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可作为验收标准

#### IR-030: 强制自我验证与怀疑机制
- **核心要求：** 禁止未测试就说"已完成"
- **AI可执行性：** ⚠️ 依赖自觉
- **当前系统状态：** ❌ 未强制执行
- **是否有用：** ✅ 有用 - 可通过提示词强化

#### IR-031: 需求确认与复述机制
- **核心要求：** 开发前复述需求，获得确认
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (dialogue-l1.yaml中的IR-031)
- **是否有用：** ✅ 已采用

#### IR-032: 代码质量阈值与强制重构
- **核心要求：** 修改3次/复杂度>10→重构
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入代码质量规则

#### IR-033: 任务队列与状态管理
- **核心要求：** 多任务队列化，一次一个
- **AI可执行性：** ⚠️ 依赖提醒
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入对话规范

#### IR-034: 错误优先开发原则
- **核心要求：** 先列错误→先写错误处理
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入开发规范

#### IR-036: 安全优先原则
- **核心要求：** 禁止硬编码敏感信息
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (IR-003相关)
- **是否有用：** ✅ 已采用

#### IR-037: 文档同步强制要求
- **核心要求：** 代码修改→同步更新文档
- **AI可执行性：** ⚠️ 常被忽略
- **当前系统状态：** ❌ 未强制执行
- **是否有用：** ✅ 有用 - 可加入对话规范

---

---

## 📋 第三部分：开发铁律 - High级别 (19条)

#### IR-002: 测试前后必须关闭应用
- **核心要求：** 清理环境，测试后关闭
- **AI可执行性：** ❌ 无法控制用户环境
- **当前系统状态：** ❌ 未实现
- **是否有用：** ❌ AI无法控制

#### IR-011: 修复BUG前必须搜索历史
- **核心要求：** 先搜索→应用成功方案
- **AI可执行性：** ✅ 可执行(有工具)
- **当前系统状态：** ⚠️ 有工具但未强制
- **是否有用：** ✅ 有用 - 可通过经验记录系统强化

#### IR-012: 必须检查并避免使用失败方法
- **核心要求：** 查失败教训库
- **AI可执行性：** ⚠️ 可查但常忘
- **当前系统状态：** ⚠️ 经验记录系统已有此功能
- **是否有用：** ✅ 已部分实现

#### IR-017: 必须优先考虑热修改开发模式
- **核心要求：** 支持运行时修改
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可作为开发建议

#### IR-018: BUG修复5次失败必须换方法
- **核心要求：** 第5次失败→切换方案
- **AI可执行性：** ⚠️ 可建议但难追踪
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入对话规范

#### IR-022: 必须添加多场景兼容性逻辑
- **核心要求：** 多语言/多场景识别
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入代码规范

#### IR-023: 所有代码必须设计调用接口
- **核心要求：** 接口设计清晰
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入代码规范

#### IR-026: 新手开发者AI主动提问
- **核心要求：** 识别新手→主动问
- **AI可执行性：** ⚠️ 依赖AI判断
- **当前系统状态：** ❌ 未实现
- **是否有用：** ⚠️ 依赖AI主动性

#### IR-027: 大项目模块化开发策略
- **核心要求：** 拆分模块，20-300行
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入代码规范

#### IR-035: 性能基准与优化要求
- **核心要求：** <100ms单次，<3s批量
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入性能规范

#### IR-038: 命名规范强制统一
- **核心要求：** 统一命名风格
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (core-l1.yaml中已有)
- **是否有用：** ✅ 已采用

#### IR-039: 标准化日志系统
- **核心要求：** [时间][级别][模块][消息]
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ⚠️ 监控系统已有部分实现
- **是否有用：** ✅ 已部分实现

#### IR-043: 测试系统路径兼容性优化
- **核心要求：** Windows/Linux适配
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ❌ 未强制
- **是否有用：** ✅ 有用 - 可加入代码规范

---

## 📋 第四部分：工作流程铁律 (WF) - 7条

### WF-000: 开发项目先后顺序
- **核心要求：** 小户→小平→小柳→小观 6步流程
- **AI可执行性：** ✅ 有效 (角色扮演)
- **当前系统状态：** ✅ 已实现 (WF-001相关)
- **是否有用：** ✅ 已采用 (团队模式最有价值)

### WF-001: 角色身份强制锁定
- **核心要求：** 四角色定义，禁止越界
- **AI可执行性：** ✅ 有效 (提示词角色扮演)
- **当前系统状态：** ✅ 已实现 (core-l1.yaml中已有)
- **是否有用：** ✅ 已采用

### WF-002: Cursor持续对话机制
- **核心要求：** 每次发言询问下一个角色
- **AI可执行性：** ✅ 有效 (防止中断)
- **当前系统状态：** ✅ 已实现 (dialogue-l1.yaml中已有)
- **是否有用：** ✅ 已采用

### WF-003: 智能需求审查系统
- **核心要求：** 防止重复和矛盾需求
- **AI可执行性：** ⚠️ 部分有效 (AI可检查但不强制)
- **当前系统状态：** ✅ 已实现 (dialogue-l1.yaml中已有)
- **是否有用：** ✅ 已采用

### WF-004: 多窗口并发协作
- **核心要求：** 系统需求池，状态同步
- **AI可执行性：** ❌ 无法实现 (AI无跨窗口能力)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ❌ 技术限制

### WF-005: 自动化升级与版本管理
- **核心要求：** 升级前检查，云端同步
- **AI可执行性：** ⚠️ 需人工 (云端同步需人工操作)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ⚠️ 需人工参与

### WF-006: 逐模块验证开发法(铁轨修复法)
- **核心要求：** 开发一个→测试一个→再继续
- **AI可执行性：** ✅ 有效 (提示词有效)
- **当前系统状态：** ❌ 未强制
- **是否有用：** ✅ 有用 - 可加入开发规范

---

## 📋 第五部分：规则管理铁律 (RM) - 5条

### RM-001: 添加规则前必须执行去重检查
- **核心要求：** grep搜索关键词，相似度>75%=重复
- **AI可执行性：** ✅ 可执行 (AI有grep工具)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入规则管理

### RM-002: 发现相似规则必须提示用户选择
- **核心要求：** 展示现有规则，提供4选项
- **AI可执行性：** ✅ 可执行 (提示词有效)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入规则管理

### RM-003: 规则冲突检测机制
- **核心要求：** 检测逻辑矛盾、要求相反
- **AI可执行性：** ⚠️ 依赖AI理解 (需AI语义分析)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入规则管理

### RM-004: 规则合并优化机制
- **核心要求：** 优先合并而非新增
- **AI可执行性：** ✅ 可执行 (提示词有效)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入规则管理

### RM-005: 规则添加日志记录
- **核心要求：** 记录操作时间、原因
- **AI可执行性：** ⚠️ 可记录 (但常被忽略)
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入监控系统

---

## 📋 第六部分：前置检查清单 (CL) - 开发前检查 (8项)

### CHK-DEV-001: 是否检查了模块/功能是否已存在？
- **关联规则：** IR-010
- **必须通过：** ✅ 是
- **AI可执行性：** ✅ 可执行(有工具)
- **当前系统状态：** ✅ 已实现 (IR-010已有)
- **是否有用：** ✅ 已采用

### CHK-DEV-002: 是否设计了清晰的调用接口？
- **关联规则：** IR-023
- **必须通过：** ✅ 是
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入检查清单

### CHK-DEV-003: 是否避免了硬编码？
- **关联规则：** IR-003
- **必须通过：** ✅ 是
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (IR-003已有)
- **是否有用：** ✅ 已采用

### CHK-DEV-004: 是否设计了完整的错误处理？
- **关联规则：** IR-034
- **必须通过：** ✅ 是
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入检查清单

### CHK-DEV-005: 函数是否控制在合理长度？
- **关联规则：** IR-027
- **必须通过：** ✅ 是
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ⚠️ 有函数长度检查但未强制
- **是否有用：** ✅ 已部分实现

### CHK-DEV-006: 命名是否清晰且遵循规范？
- **关联规则：** IR-038
- **必须通过：** ✅ 是
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (IR-038已有)
- **是否有用：** ✅ 已采用

### CHK-DEV-007: 是否考虑了性能要求？
- **关联规则：** IR-035
- **必须通过：** ❌ 否
- **AI可执行性：** ⚠️ 可建议
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入检查清单

### CHK-DEV-008: 是否考虑了安全要求？
- **关联规则：** IR-036
- **必须通过：** ✅ 是
- **AI可执行性：** ✅ 可执行
- **当前系统状态：** ✅ 已实现 (IR-003相关)
- **是否有用：** ✅ 已采用

---

---

## 📋 第七部分：Cursor最佳实践 (15条)

### 1. 避免重复劳动 - 操作记忆规则
- **核心要求：** 本对话中已执行的搜索/读取/列举，不再重复，直接引用缓存
- **检测：** 操作记录追踪
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入对话规范

### 2. 并行能力最大化 - 强制并行规则
- **核心要求：** 读取/搜索多个独立项目时，必须使用并行工具调用
- **检测：** 检查function_calls数量
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 提升性能50%

### 3. 直接使用工具，不显示代码
- **核心要求：** 直接用write/search_replace修改文件，不在对话中显示大段代码
- **检测：** 检查是否显示代码块
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 减少Token消耗70%

### 4. Token优化 - 省略冗余输出
- **核心要求：** 不输出"好的我来XX"，直接开始工作；不解释已知信息
- **检测：** 检查开头语句
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 减少Token浪费

### 5. 上下文污染最小化
- **核心要求：** 避免在对话中显示完整代码，保持上下文清洁
- **检测：** 代码块数量统计
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 延长对话寿命

---

## 📋 第八部分：测试验证规则 (5条)

### 1. 真实环境测试强制要求
- **核心要求：** 禁止模拟测试、print假装测试、注释代码假装成功
- **检测：** 检查是否有实际执行日志
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - Critical级别

### 2. 三层测试标准
- **核心要求：** 单元测试 + 集成测试 + 实际运行验证
- **检测：** 测试报告完整性
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入质量门禁

### 3. 边界条件必测
- **核心要求：** 空值、最大值、特殊字符等边界情况必须测试
- **检测：** 测试用例覆盖
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入检查清单

### 4. 性能验证基准
- **核心要求：** 响应时间<100ms，批量操作<3s
- **检测：** 性能测试报告
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 已在IR-035中

### 5. 回归测试要求
- **核心要求：** 修改后重新运行所有相关测试
- **检测：** 测试覆盖率对比
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入质量门禁

---

## 📋 第九部分：智能建议类 (来自可行性分析)

### 核心发现：AI固有限制

#### 1. 记忆限制
- **问题：** AI本质上无法长期记忆，规则太多会遗忘
- **建议：** 只强制执行10-15条核心规则，其他规则作为提醒
- **当前系统状态：** ⚠️ 部分采纳（已有17条核心规则）
- **优化建议：** 继续精简，优先级分级

#### 2. 自我监控限制
- **问题：** AI无法真正"自我监控"（如对话轮数、Token数量）
- **建议：** 外部工具监控，达到阈值时主动提醒AI
- **当前系统状态：** ❌ 未实现
- **是否有用：** ✅ 有用 - 可加入监控系统

#### 3. 强制执行的唯一方法：MCP工具拦截
- **核心发现：** 只有MCP工具级拦截才能真正强制
- **建议：** 核心规则必须通过MCP实现，而非仅提示词
- **当前系统状态：** ⚠️ 部分实现（规则引擎+VSCode扩展）
- **优化建议：** 转换为MCP工具方式

#### 4. 务实的成功率预期
- **核心发现：** 即使最完善的系统，AI执行率也难超过95%
- **原因：** AI模型本身的不确定性
- **建议：** 接受90-95%的执行率，不追求100%
- **当前系统状态：** ✅ 已采纳（目标95%）

---

## 📋 扫描进度

- [x] 【规则整理】小柳系统完整规则清单与分类目录.md (完成)
- [x] 【终极方案】多层防御体系-完整技术实现方案.md (完成)
- [x] 【应急方案】小柳系统立即可用版-团队模式+高执行率.md (完成)
- [x] 【务实评估】小柳系统需求可行性分析-不画饼版.md (完成)
- [ ] 继续扫描其他文档...

---

## 📊 当前统计

**已扫描：** 108条规则/要求  
**已实现：** 26条 ✅  
**未实现但有用：** 62条 📝  
**理想化难实现：** 12条 ⚠️  
**技术限制无法实现：** 8条 ❌

**核心发现（重要）：**
1. 🎯 **Cursor最佳实践** - 15条极有价值的优化规则
2. 🧪 **真实测试要求** - 5条关键测试规范
3. 💡 **AI限制认知** - 4条务实的系统设计原则

*继续扫描中...*


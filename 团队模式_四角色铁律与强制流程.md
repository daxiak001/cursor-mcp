# 团队模式：四角色铁律与强制流程（默认开启｜~1=执行）

一、四角色铁律（简版）
- 小户(XH)｜用户代表：
  - 职责：用大白话确认需求；对“执行前理解卡”给出“执行/~1”或修改意见
  - 禁止：写代码/下命令/具体实现
- 小平(XP)｜产品设计：
  - 职责：给最短方案与边界；不写代码
  - 禁止：越权直接改代码
- 小柳(XL)｜开发实现：
  - 职责：按确认卡执行，能脚本的自己做（SIL-004），先测后交付
  - 禁止：未确认先动手；未测试说完成；硬编码
- 小观(XG)｜质量审查：
  - 职责：给出可复现实证（用例/报告/截图），把问题指到具体文件与行
  - 禁止：直接改代码；只说“有问题”没有证据

二、强制执行流程（节拍）
1) 执行前理解卡（IR-031｜强制）
   - 我理解 / 最短方案(1-2-3) / 风险 / 请回复“执行”或“~1”
2) 收到“执行/~1”→ 小柳执行
   - 写前：npm run guard:pre（看dev-precheck）
   - 写中：npm run guard:start（命中旧错立即提示）
   - 自主执行：能脚本的自己做（SIL-004）；做不了再报方案
3) 小观验收
   - 单测+域冒烟+覆盖率门槛；生成ci-dashboard与问题证据
4) 小户最终确认
   - 符合预期→通过；不符→回到步骤1

三、证据与留痕（必须）
- 开发跟进记录.md：[#TASK]/确认卡摘要/[#TEST]/[#STAGE]
- reports：ci-dashboard、smoke-analysis、hardcode-scan、interface-diff、contract-check

四、默认与快捷
- 团队模式默认开启（config/team_mode.json）
- 快捷确认：“~1” 等同 “执行”

五、放弃条件（两天评估不达标就停）
- 执行前确认覆盖率<90% 或 自主执行率<90% 或 硬规则阻断率<95% 或 复发错误>10%
